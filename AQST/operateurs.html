<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Opérateurs - Alerte Qualite Service</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header>
        <div class="logo">
            <h1>Alerte Qualite <span>Service</span></h1>
        </div>
        <nav>
            <div class="menu-toggle">
                <i class="fas fa-bars"></i>
            </div>
            <ul class="nav-menu">
                <li><a href="index.html">Accueil</a></li>
                <li><a href="plaintes.html">Plaintes</a></li>
                <li><a href="soumettre.html">Soumettre</a></li>
                <li><a href="operateurs.html" class="active">Opérateurs</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li><a href="login.html">Dashboards</a></li>
            </ul>
        </nav>
    </header>

    <div class="page-header">
        <h2>Opérateurs Télécom au Cameroun</h2>
        <p>Informations et performances des principaux opérateurs de télécommunications</p>
    </div>

    <section class="operators-overview">
        <div class="operators-container">
            <div class="operator-card">
                <div class="operator-logo mtn-logo">
                    <i class="fas fa-broadcast-tower"></i>
                    <h3>MTN Cameroun</h3>
                </div>
                <div class="operator-info">
                    <div class="info-item">
                        <strong>Part de marché:</strong> 58%
                    </div>
                    <div class="info-item">
                        <strong>Année d'établissement:</strong> 2000
                    </div>
                    <div class="info-item">
                        <strong>Services:</strong> Voix, SMS, Internet Mobile, Mobile Money
                    </div>
                </div>
                <div class="operator-performance">
                    <h4>Performance (selon les utilisateurs)</h4>
                    <div class="rating-bar">
                        <span class="rating-label">Couverture réseau</span>
                        <div class="progress-bar">
                            <div class="progress" style="width: 75%;"></div>
                        </div>
                        <span class="rating-value">3.8/5</span>
                    </div>
                    <div class="rating-bar">
                        <span class="rating-label">Qualité Internet</span>
                        <div class="progress-bar">
                            <div class="progress" style="width: 60%;"></div>
                        </div>
                        <span class="rating-value">3.0/5</span>
                    </div>
                    <div class="rating-bar">
                        <span class="rating-label">Service client</span>
                        <div class="progress-bar">
                            <div class="progress" style="width: 50%;"></div>
                        </div>
                        <span class="rating-value">2.5/5</span>
                    </div>
                    <div class="rating-bar">
                        <span class="rating-label">Rapport qualité-prix</span>
                        <div class="progress-bar">
                            <div class="progress" style="width: 65%;"></div>
                        </div>
                        <span class="rating-value">3.3/5</span>
                    </div>
                </div>
                <div class="operator-actions">
                    <a href="#" class="btn btn-small">Voir les plaintes</a>
                    <a href="https://www.mtn.cm" target="_blank" class="btn btn-small btn-secondary">Site officiel</a>
                </div>
            </div>

            <div class="operator-card">
                <div class="operator-logo orange-logo">
                    <i class="fas fa-broadcast-tower"></i>
                    <h3>Orange Cameroun</h3>
                </div>
                <div class="operator-info">
                    <div class="info-item">
                        <strong>Part de marché:</strong> 33%
                    </div>
                    <div class="info-item">
                        <strong>Année d'établissement:</strong> 1999
                    </div>
                    <div class="info-item">
                        <strong>Services:</strong> Voix, SMS, Internet Mobile, Orange Money, Internet Fibre
                    </div>
                </div>
                <div class="operator-performance">
                    <h4>Performance (selon les utilisateurs)</h4>
                    <div class="rating-bar">
                        <span class="rating-label">Couverture réseau</span>
                        <div class="progress-bar">
                            <div class="progress" style="width: 70%;"></div>
                        </div>
                        <span class="rating-value">3.5/5</span>
                    </div>
                    <div class="rating-bar">
                        <span class="rating-label">Qualité Internet</span>
                        <div class="progress-bar">
                            <div class="progress" style="width: 76%;"></div>
                        </div>
                        <span class="rating-value">3.8/5</span>
                    </div>
                    <div class="rating-bar">
                        <span class="rating-label">Service client</span>
                        <div class="progress-bar">
                            <div class="progress" style="width: 60%;"></div>
                        </div>
                        <span class="rating-value">3.0/5</span>
                    </div>
                    <div class="rating-bar">
                        <span class="rating-label">Rapport qualité-prix</span>
                        <div class="progress-bar">
                            <div class="progress" style="width: 55%;"></div>
                        </div>
                        <span class="rating-value">2.8/5</span>
                    </div>
                </div>
                <div class="operator-actions">
                    <a href="#" class="btn btn-small">Voir les plaintes</a>
                    <a href="https://www.orange.cm" target="_blank" class="btn btn-small btn-secondary">Site officiel</a>
                </div>
            </div>

            <div class="operator-card">
                <div class="operator-logo nexttel-logo">
                    <i class="fas fa-broadcast-tower"></i>
                    <h3>Nexttel</h3>
                </div>
                <div class="operator-info">
                    <div class="info-item">
                        <strong>Part de marché:</strong> 7%
                    </div>
                    <div class="info-item">
                        <strong>Année d'établissement:</strong> 2014
                    </div>
                    <div class="info-item">
                        <strong>Services:</strong> Voix, SMS, Internet Mobile
                    </div>
                </div>
                <div class="operator-performance">
                    <h4>Performance (selon les utilisateurs)</h4>
                    <div class="rating-bar">
                        <span class="rating-label">Couverture réseau</span>
                        <div class="progress-bar">
                            <div class="progress" style="width: 50%;"></div>
                        </div>
                        <span class="rating-value">2.5/5</span>
                    </div>
                    <div class="rating-bar">
                        <span class="rating-label">Qualité Internet</span>
                        <div class="progress-bar">
                            <div class="progress" style="width: 40%;"></div>
                        </div>
                        <span class="rating-value">2.0/5</span>
                    </div>
                    <div class="rating-bar">
                        <span class="rating-label">Service client</span>
                        <div class="progress-bar">
                            <div class="progress" style="width: 30%;"></div>
                        </div>
                        <span class="rating-value">1.5/5</span>
                    </div>
                    <div class="rating-bar">
                        <span class="rating-label">Rapport qualité-prix</span>
                        <div class="progress-bar">
                            <div class="progress" style="width: 45%;"></div>
                        </div>
                        <span class="rating-value">2.3/5</span>
                    </div>
                </div>
                <div class="operator-actions">
                    <a href="#" class="btn btn-small">Voir les plaintes</a>
                    <a href="#" target="_blank" class="btn btn-small btn-secondary">Site officiel</a>
                </div>
            </div>

            <div class="operator-card">
                <div class="operator-logo camtel-logo">
                    <i class="fas fa-broadcast-tower"></i>
                    <h3>Camtel</h3>
                </div>
                <div class="operator-info">
                    <div class="info-item">
                        <strong>Part de marché:</strong> 2%
                    </div>
                    <div class="info-item">
                        <strong>Année d'établissement:</strong> 1998
                    </div>
                    <div class="info-item">
                        <strong>Services:</strong> Voix, Internet fixe, Internet Mobile, Fibre optique
                    </div>
                </div>
                <div class="operator-performance">
                    <h4>Performance (selon les utilisateurs)</h4>
                    <div class="rating-bar">
                        <span class="rating-label">Couverture réseau</span>
                        <div class="progress-bar">
                            <div class="progress" style="width: 45%;"></div>
                        </div>
                        <span class="rating-value">2.3/5</span>
                    </div>
                    <div class="rating-bar">
                        <span class="rating-label">Qualité Internet</span>
                        <div class="progress-bar">
                            <div class="progress" style="width: 55%;"></div>
                        </div>
                        <span class="rating-value">2.8/5</span>
                    </div>
                    <div class="rating-bar">
                        <span class="rating-label">Service client</span>
                        <div class="progress-bar">
                            <div class="progress" style="width: 35%;"></div>
                        </div>
                        <span class="rating-value">1.8/5</span>
                    </div>
                    <div class="rating-bar">
                        <span class="rating-label">Rapport qualité-prix</span>
                        <div class="progress-bar">
                            <div class="progress" style="width: 50%;"></div>
                        </div>
                        <span class="rating-value">2.5/5</span>
                    </div>
                </div>
                <div class="operator-actions">
                    <a href="#" class="btn btn-small">Voir les plaintes</a>
                    <a href="https://www.camtel.cm" target="_blank" class="btn btn-small btn-secondary">Site officiel</a>
                </div>
            </div>
        </div>
    </section>

    <section class="operator-stats">
        <h2>Statistiques Comparatives</h2>
        <div class="chart-container">
            <canvas id="operatorChart"></canvas>
        </div>
        <div class="chart-legends">
            <div class="legend-item">
                <span class="legend-color mtn-color"></span>
                <span class="legend-text">MTN Cameroun</span>
            </div>
            <div class="legend-item">
                <span class="legend-color orange-color"></span>
                <span class="legend-text">Orange Cameroun</span>
            </div>
            <div class="legend-item">
                <span class="legend-color nexttel-color"></span>
                <span class="legend-text">Nexttel</span>
            </div>
            <div class="legend-item">
                <span class="legend-color camtel-color"></span>
                <span class="legend-text">Camtel</span>
            </div>
        </div>
    </section>

    <section class="regulations">
        <h2>Régulation des Télécommunications au Cameroun</h2>
        <div class="regulation-card">
            <div class="regulation-icon">
                <i class="fas fa-gavel"></i>
            </div>
            <div class="regulation-content">
                <h3>Agence de Régulation des Télécommunications (ART)</h3>
                <p>L'ART est l'organisme public chargé de réguler, de contrôler et de suivre les activités du secteur des télécommunications au Cameroun. Son rôle est d'assurer que les opérateurs respectent leurs cahiers des charges et offrent des services de qualité aux consommateurs.</p>
                <p>Si vous avez des plaintes non résolues par votre opérateur, vous pouvez contacter l'ART:</p>
                <ul>
                    <li><strong>Site web:</strong> <a href="https://www.art.cm" target="_blank">www.art.cm</a></li>
                    <li><strong>Email:</strong> <a href="mailto:info@art.cm">info@art.cm</a></li>
                    <li><strong>Téléphone:</strong> +237 222 23 03 80</li>
                </ul>
            </div>
        </div>
    </section>

    <footer>
        <div class="footer-container">
            <div class="footer-section">
                <h3>Alerte Qualite Service</h3>
                <p>Initiative citoyenne pour l'amélioration des services télécom au Cameroun.</p>
            </div>
            <div class="footer-section">
                <h3>Liens rapides</h3>
                <ul>
                    <li><a href="index.html">Accueil</a></li>
                    <li><a href="plaintes.html">Plaintes</a></li>
                    <li><a href="soumettre.html">Soumettre</a></li>
                    <li><a href="operateurs.html">Opérateurs</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Suivez-nous</h3>
                <div class="social-icons">
                    <a href="#"><i class="fab fa-facebook"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-whatsapp"></i></a>
                </div>
            </div>
        </div>
        <div class="copyright">
            <p>&copy; 2025 Alerte Qualite Service. Tous droits réservés.</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="scripts.js"></script>
    <script src="charts.js"></script>
    <script>
        let operatorChart = null;

        // Fonction pour mettre à jour les statistiques des opérateurs
        async function updateOperatorStats() {
            try {
                const response = await fetch('backend/controllers/PlainteController.php');
                const data = await response.json();
                
                if (data.success && data.records) {
                    // Calculer les statistiques par opérateur
                    const operatorStats = {};
                    data.records.forEach(complaint => {
                        if (!operatorStats[complaint.operateur_nom]) {
                            operatorStats[complaint.operateur_nom] = {
                                total: 0,
                                categories: {},
                                regions: new Set()
                            };
                        }
                        operatorStats[complaint.operateur_nom].total++;
                        operatorStats[complaint.operateur_nom].categories[complaint.type_plainte] = 
                            (operatorStats[complaint.operateur_nom].categories[complaint.type_plainte] || 0) + 1;
                        operatorStats[complaint.operateur_nom].regions.add(complaint.region);
                    });

                    // Mettre à jour les cartes des opérateurs
                    Object.entries(operatorStats).forEach(([operator, stats]) => {
                        const card = document.querySelector(`.operator-card h3:contains('${operator}')`).closest('.operator-card');
                        if (card) {
                            // Mettre à jour le nombre total de plaintes
                            const totalComplaints = card.querySelector('.info-item:first-child');
                            if (totalComplaints) {
                                totalComplaints.innerHTML = `<strong>Plaintes reçues:</strong> ${stats.total}`;
                            }

                            // Mettre à jour les barres de progression
                            const progressBars = card.querySelectorAll('.progress');
                            if (progressBars.length >= 4) {
                                // Couverture réseau
                                progressBars[0].style.width = `${Math.min(100, (stats.total / 10) * 100)}%`;
                                // Qualité Internet
                                progressBars[1].style.width = `${Math.min(100, (stats.categories['Vitesse Internet'] || 0) * 20)}%`;
                                // Service client
                                progressBars[2].style.width = `${Math.min(100, (stats.categories['Service client'] || 0) * 20)}%`;
                                // Rapport qualité-prix
                                progressBars[3].style.width = `${Math.min(100, (stats.regions.size * 10))}%`;
                            }
                        }
                    });

                    // Mettre à jour le graphique
                    const ctx = document.getElementById('operatorChart').getContext('2d');
                    if (operatorChart) {
                        operatorChart.destroy();
                    }
                    operatorChart = new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: Object.keys(operatorStats),
                            datasets: [{
                                label: 'Nombre de plaintes',
                                data: Object.values(operatorStats).map(stats => stats.total),
                                backgroundColor: [
                                    'rgba(255, 99, 132, 0.5)',
                                    'rgba(54, 162, 235, 0.5)',
                                    'rgba(255, 206, 86, 0.5)',
                                    'rgba(75, 192, 192, 0.5)'
                                ],
                                borderColor: [
                                    'rgba(255, 99, 132, 1)',
                                    'rgba(54, 162, 235, 1)',
                                    'rgba(255, 206, 86, 1)',
                                    'rgba(75, 192, 192, 1)'
                                ],
                                borderWidth: 1
                            }]
                        },
                        options: {
                            responsive: true,
                            scales: {
                                y: {
                                    beginAtZero: true
                                }
                            }
                        }
                    });
                }
            } catch (error) {
                console.error('Erreur lors du chargement des statistiques des opérateurs:', error);
            }
        }

        // Charger les statistiques au chargement de la page
        document.addEventListener('DOMContentLoaded', () => {
            updateOperatorStats();
            // Recharger les statistiques toutes les 30 secondes
            setInterval(updateOperatorStats, 30000);
        });
    </script>
</body>
</html>